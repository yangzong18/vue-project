<template>
  <div>
    <nv-head page-type="ä¸»é¢˜" :show-menu="showMenu" :need-add="true" :fix-head="true"></nv-head>
    <div id="page" :class="{'show-menu':showMenu}" v-if="topic.title">
      <div class="no-data" v-if="noData">
        <i class="iconfont icon-empty">&#xe60a;</i>
        è¯¥è¯é¢˜ä¸å­˜åœ¨!
      </div>
      <div class="yes-data" v-else>
        <h2 class="topic-title" v-text="topic.title"></h2>
        <section class="author-info">
          <img :src="topic.author.avatar_url" class="avatar" />
          <div class="col">
            <span v-text="topic.author.loginname"></span>
            <time>å‘å¸ƒäº:{{topic.create_at|getLastTimeStr(true)}}</time>
          </div>
          <div class="right">
            <span class="tag" :class="getTabInfo(topic.tab,topic.good,topic.top,true)" v-text="getTabInfo(topic.tab,topic.good,topic.top,false)"></span>
            <span class="name">{{topic.visit_count}}æ¬¡æµè§ˆ</span>
          </div>
        </section>
        <section class="markdown-body topic-content" v-html="topic.content">
          
        </section>
        <h3 class="topic-reply">
            <strong>{{topic.reply_count}}</strong> å›å¤
        </h3>
        <section class="reply-list">
          <ul>
            <li >
              <section class="user">
                <a href="/user/i5ting" class>
                  <img
                    src="https://avatars3.githubusercontent.com/u/3118295?v=4&amp;s=120"
                    class="head"
                  />
                </a>
                <div class="info">
                  <span class="cl">
                    <span class="name">i5ting</span>
                    <span class="name mt10">
                      <span></span>
                      å‘å¸ƒäº:1å‘¨å‰
                    </span>
                  </span>
                  <span class="cr">
                    <span class="iconfont icon">î˜ˆ</span>
                    0
                    <span class="iconfont icon">î˜‰</span>
                  </span>
                </div>
              </section>
              <div class="reply_content">
                <div class="markdown-text">
                  <p>æœ¬æ¬¡æ´»åŠ¨æ„Ÿè°¢talkding dataæ”¯æŒåœºåœ°</p>
                  <p>
                    <img src="//static.cnodejs.org/FpWR6OSuCx4XsE2nE8J06UVzWWP6" alt="55555.png" />
                  </p>
                </div>
              </div>
              <!---->
            </li>
            <li>
              <section class="user">
                <a href="/user/jothy1023" class>
                  <img
                    src="https://avatars2.githubusercontent.com/u/14975630?v=4&amp;s=120"
                    class="head"
                  />
                </a>
                <div class="info">
                  <span class="cl">
                    <span class="name">jothy1023</span>
                    <span class="name mt10">
                      <span></span>
                      å‘å¸ƒäº:1å‘¨å‰
                    </span>
                  </span>
                  <span class="cr">
                    <span class="iconfont icon">î˜ˆ</span>
                    0
                    <span class="iconfont icon">î˜‰</span>
                  </span>
                </div>
              </section>
              <div class="reply_content">
                <div class="markdown-text">
                  <p>åœ¨çº¿ç»™ç‹¼å”æ‰“ callï¼ï¼ï¼</p>
                </div>
              </div>
              <!---->
            </li>
            <li>
              <section class="user">
                <a href="/user/xx1124961758" class>
                  <img
                    src="https://avatars0.githubusercontent.com/u/13390985?v=4&amp;s=120"
                    class="head"
                  />
                </a>
                <div class="info">
                  <span class="cl">
                    <span class="name">xx1124961758</span>
                    <span class="name mt10">
                      <span></span>
                      å‘å¸ƒäº:1å‘¨å‰
                    </span>
                  </span>
                  <span class="cr">
                    <span class="iconfont icon">î˜ˆ</span>
                    0
                    <span class="iconfont icon">î˜‰</span>
                  </span>
                </div>
              </section>
              <div class="reply_content">
                <div class="markdown-text">
                  <p>
                    <a href="/user/i5ting">@i5ting</a> ç‹¼å”ï¼Œæœ‰å½•æ’­å—
                  </p>
                </div>
              </div>
              <!---->
            </li>
            <li>
              <section class="user">
                <a href="/user/vanishcode" class>
                  <img
                    src="https://avatars0.githubusercontent.com/u/20496444?v=4&amp;s=120"
                    class="head"
                  />
                </a>
                <div class="info">
                  <span class="cl">
                    <span class="name">vanishcode</span>
                    <span class="name mt10">
                      <span></span>
                      å‘å¸ƒäº:1å‘¨å‰
                    </span>
                  </span>
                  <span class="cr">
                    <span class="iconfont icon">î˜ˆ</span>
                    0
                    <span class="iconfont icon">î˜‰</span>
                  </span>
                </div>
              </section>
              <div class="reply_content">
                <div class="markdown-text">
                  <p>å¥‡èˆå›¢æ˜¨å¤©å›¢å»ºï¼Œè¦ä¸è´ºè€è¯´è¦å»æ¥ç€ğŸ¤£</p>
                </div>
              </div>
              <!---->
            </li>
            <li>
              <section class="user">
                <a href="/user/i5ting" class>
                  <img
                    src="https://avatars3.githubusercontent.com/u/3118295?v=4&amp;s=120"
                    class="head"
                  />
                </a>
                <div class="info">
                  <span class="cl">
                    <span class="name">i5ting</span>
                    <span class="name mt10">
                      <span></span>
                      å‘å¸ƒäº:14å°æ—¶å‰
                    </span>
                  </span>
                  <span class="cr">
                    <span class="iconfont icon">î˜ˆ</span>
                    0
                    <span class="iconfont icon">î˜‰</span>
                  </span>
                </div>
              </section>
              <div class="reply_content">
                <div class="markdown-text">
                  <p>
                    PPT
                    <a
                      href="https://github.com/i5ting/nodeparty-beijing-2020-1-11"
                    >https://github.com/i5ting/nodeparty-beijing-2020-1-11</a>
                  </p>
                </div>
              </div>
              <!---->
            </li>
            <li>
              <section class="user">
                <a href="/user/i5ting" class>
                  <img
                    src="https://avatars3.githubusercontent.com/u/3118295?v=4&amp;s=120"
                    class="head"
                  />
                </a>
                <div class="info">
                  <span class="cl">
                    <span class="name">i5ting</span>
                    <span class="name mt10">
                      <span></span>
                      å‘å¸ƒäº:14å°æ—¶å‰
                    </span>
                  </span>
                  <span class="cr">
                    <span class="iconfont icon">î˜ˆ</span>
                    0
                    <span class="iconfont icon">î˜‰</span>
                  </span>
                </div>
              </section>
              <div class="reply_content">
                <div class="markdown-text">
                  <p>
                    <a href="/user/vanishcode">@vanishcode</a> å¬haxè¯´äº†ï¼Œæ„Ÿè°¢æ„Ÿè°¢
                  </p>
                </div>
              </div>
              <!---->
            </li>
            <li>
              <section class="user">
                <a href="/user/i5ting" class>
                  <img
                    src="https://avatars3.githubusercontent.com/u/3118295?v=4&amp;s=120"
                    class="head"
                  />
                </a>
                <div class="info">
                  <span class="cl">
                    <span class="name">i5ting</span>
                    <span class="name mt10">
                      <span></span>
                      å‘å¸ƒäº:14å°æ—¶å‰
                    </span>
                  </span>
                  <span class="cr">
                    <span class="iconfont icon">î˜ˆ</span>
                    0
                    <span class="iconfont icon">î˜‰</span>
                  </span>
                </div>
              </section>
              <div class="reply_content">
                <div class="markdown-text">
                  <p>
                    èšé¤ç…§ç‰‡
                    <img
                      src="//static.cnodejs.org/FpZR_Fjz7xoh08h_NmyczX_wBwHK"
                      alt="mmexport1579450936429.jpg"
                    />
                  </p>
                </div>
              </div>
              <!---->
            </li>
            <li>
              <section class="user">
                <a href="/user/Boelroy" class>
                  <img
                    src="https://avatars0.githubusercontent.com/u/2794349?v=4&amp;s=120"
                    class="head"
                  />
                </a>
                <div class="info">
                  <span class="cl">
                    <span class="name">Boelroy</span>
                    <span class="name mt10">
                      <span></span>
                      å‘å¸ƒäº:13å°æ—¶å‰
                    </span>
                  </span>
                  <span class="cr">
                    <span class="iconfont icon">î˜ˆ</span>
                    0
                    <span class="iconfont icon">î˜‰</span>
                  </span>
                </div>
              </section>
              <div class="reply_content">
                <div class="markdown-text">
                  <p>
                    <a href="/user/i5ting">@i5ting</a> ä¸ºç‹¼å”æ‰“call, ç‹¼å”æœ€å¸…
                  </p>
                </div>
              </div>
              <!---->
            </li>
            <li>
              <section class="user">
                <a href="/user/justjavac" class>
                  <img
                    src="https://avatars1.githubusercontent.com/u/359395?v=4&amp;s=120"
                    class="head"
                  />
                </a>
                <div class="info">
                  <span class="cl">
                    <span class="name">justjavac</span>
                    <span class="name mt10">
                      <span></span>
                      å‘å¸ƒäº:6å°æ—¶å‰
                    </span>
                  </span>
                  <span class="cr">
                    <span class="iconfont icon">î˜ˆ</span>
                    0
                    <span class="iconfont icon">î˜‰</span>
                  </span>
                </div>
              </section>
              <div class="reply_content">
                <div class="markdown-text">
                  <p>ç‹¼å”æœ€å¸…</p>
                </div>
              </div>
              <!---->
            </li>
            <li>
              <section class="user">
                <a href="/user/i5ting" class>
                  <img
                    src="https://avatars3.githubusercontent.com/u/3118295?v=4&amp;s=120"
                    class="head"
                  />
                </a>
                <div class="info">
                  <span class="cl">
                    <span class="name">i5ting</span>
                    <span class="name mt10">
                      <span></span>
                      å‘å¸ƒäº:2å°æ—¶å‰
                    </span>
                  </span>
                  <span class="cr">
                    <span class="iconfont icon">î˜ˆ</span>
                    0
                    <span class="iconfont icon">î˜‰</span>
                  </span>
                </div>
              </section>
              <div class="reply_content">
                <div class="markdown-text">
                  <p>
                    é¢å‘Bç«¯å·¥ä½œå°çš„å¾®å‰ç«¯æ–¹æ¡ˆ-ConsoleOS-å¾åšæ–‡
                    <a
                      href="https://edu.talkingdata.com/open-class?id=142"
                    >https://edu.talkingdata.com/open-class?id=142</a>
                  </p>
                  <p>
                    Serverlessåœ¨ç¾å›¢çš„å®è·µ-é¾™ä½³æ–‡
                    <a
                      href="https://edu.talkingdata.com/open-class?id=143"
                    >https://edu.talkingdata.com/open-class?id=143</a>
                  </p>
                  <p>
                    å‰ç«¯ç”Ÿæ€å»ºè®¾åœ¨ç“œå­çš„è½åœ°å®è·µ-ç‹ä¸œ
                    <a
                      href="https://edu.talkingdata.com/open-class?id=144"
                    >https://edu.talkingdata.com/open-class?id=144</a>
                  </p>
                  <p>
                    Egg-React-SSRæ·±åº¦è§£æ-å¼ å®‡æ˜‚
                    <a
                      href="https://edu.talkingdata.com/open-class?id=145"
                    >https://edu.talkingdata.com/open-class?id=145</a>
                  </p>
                  <p>
                    å¦‚ä½•èå…¥å¹¶è´¡çŒ®å¼€æº-Justjavac
                    <a
                      href="https://edu.talkingdata.com/open-class?id=146"
                    >https://edu.talkingdata.com/open-class?id=146</a>
                  </p>
                  <p>
                    åœ†æ¡Œè®¨è®º
                    <a
                      href="https://edu.talkingdata.com/open-class?id=147"
                    >https://edu.talkingdata.com/open-class?id=147</a>
                  </p>
                </div>
              </div>
              <!---->
            </li>
          </ul>
        </section>
      </div>
    </div>
  </div>
</template>
<script>
import nvHead from "../components/header";
import { getTopic } from "@/api/api";
import utils from '../libs/utils'
export default {
  name: "Topic",
  data() {
    return {
      showMenu: false,
      topicId: "",
      topic: {},
      noData: false
    };
  },
  beforeMount() {
    this.getData();
  },
  mounted() {
    // éšè—å·¦ä¾§å±•å¼€èœå•
    this.showMenu = false;
  },
  methods: {
    getData() {
      // è·å–urlä¼ çš„tabå‚æ•°
      this.topicId = this.$route.params.id;
      getTopic(this.topicId).then(res => {
        console.log(res);
        if (res && res.data) {
          this.topic = res.data;
        } else {
          this.noData = true;
        }
      });
    },
    getTabInfo(tab, good = false, top, isClass) {
      return utils.getTabInfo(tab, good, top, isClass);
    },
    getLastTimeStr(time, ago) {
      return utils.getLastTimeStr(time, ago);
    }
  },
  components: {
    nvHead
  }
};
</script>
<style lang="scss">
</style>